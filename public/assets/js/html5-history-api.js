!function(e){if("function"==typeof define&&define.amd){if("undefined"!=typeof requirejs){var t=requirejs,n="[history"+(new Date).getTime()+"]",r=t.onError;e.toString=function(){return n},t.onError=function(e){-1===e.message.indexOf(n)&&r.call(t,e)}}define([],e)}if("object"!=typeof exports||"undefined"==typeof module)return e();module.exports=e()}(function(){function e(e,t){var n=E.history!==w;n&&(E.history=w),e.apply(w,t),n&&(E.history=A)}function t(){}function n(e,t,r){if(e==y||""===e||t)e=t?e:T.href,(!R||r)&&(e=e.replace(/^[^#]*/,"")||"#",e=T.protocol.replace(/:.*$|$/,":")+"//"+T.host+q.basepath+e.replace(RegExp("^#[/]?(?:"+q.type+")?"),""));else{var t=n(),i=x.getElementsByTagName("base")[0];!r&&i&&i.getAttribute("href")&&(i.href=i.href,t=n(i.href,y,v)),r=t.d,i=t.h,e=""+e,e=/^(?:\w+\:)?\/\//.test(e)?0===e.indexOf("/")?i+e:e:i+"//"+t.g+(0===e.indexOf("/")?e:0===e.indexOf("?")?r+e:0===e.indexOf("#")?r+t.e+e:r.replace(/[^\/]+$/g,"")+e)}J.href=e;var e=/(?:([a-zA-Z0-9\-]+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(J.href),t=e[2]+(e[3]?":"+e[3]:""),r=e[4]||"/",i=e[5]||"",o="#"===e[6]?"":e[6]||"",a=r+i+o,c=r.replace(RegExp("^"+q.basepath,"i"),q.type)+i;return{b:e[1]+"//"+t+a,h:e[1],g:t,i:e[2],k:e[3]||"",d:r,e:i,a:o,c:a,j:c,f:c+o}}function r(e){return e&&E&&E.EventTarget&&"function"==typeof E.EventTarget.prototype.addEventListener&&"function"==typeof e.bind?e.bind(E):e}function i(){var e;try{e=E.sessionStorage,e.setItem(C+"t","1"),e.removeItem(C+"t")}catch(t){e={getItem:function(e){return e=x.cookie.split(e+"="),1<e.length&&e.pop().split(";").shift()||"null"},setItem:function(e){var t={};(t[T.href]=A.state)&&(x.cookie=e+"="+S.stringify(t))}}}try{H=S.parse(e.getItem(C))||{}}catch(e){H={}}G(N+"unload",function(){e.setItem(C,S.stringify(H))},m)}function o(e,n,r,i){var o=0;r||(r={set:t},o=1);var a=!r.set,c=!r.get,f={configurable:v,set:function(){a=1},get:function(){c=1}};try{I(e,n,f),e[n]=e[n],I(e,n,r)}catch(e){}if(!(a&&c||(e.__defineGetter__&&(e.__defineGetter__(n,f.get),e.__defineSetter__(n,f.set),e[n]=e[n],r.get&&e.__defineGetter__(n,r.get),r.set&&e.__defineSetter__(n,r.set)),a&&c))){if(o)return m;if(e===E){try{var s=e[n];e[n]=y}catch(e){}if("execScript"in E)E.execScript("Public "+n,"VBScript"),E.execScript("var "+n+";","JavaScript");else try{I(e,n,{value:t})}catch(t){"onpopstate"===n&&(G("popstate",r=function(){U("popstate",r,m);var t=e.onpopstate;e.onpopstate=y,setTimeout(function(){e.onpopstate=t},1)},m),W=0)}e[n]=s}else try{try{var p=O.create(e);I(O.getPrototypeOf(p)===e?p:e,n,r);for(var u in e)"function"==typeof e[u]&&(p[u]=e[u].bind(e));try{i.call(p,p,e)}catch(e){}e=p}catch(t){I(e.constructor.prototype,n,r)}}catch(e){return m}}return e}function a(e,t,n){return n=n||{},e=e===ee?T:e,n.set=n.set||function(n){e[t]=n},n.get=n.get||function(){return e[t]},n}function c(e,t,n){e in K?K[e].push(t):3<arguments.length?G(e,t,n,arguments[3]):G(e,t,n)}function f(e,t,n){var r=K[e];if(r){for(e=r.length;e--;)if(r[e]===t){r.splice(e,1);break}}else U(e,t,n)}function s(e,n){var r=(""+("string"==typeof e?e:e.type)).replace(/^on/,""),i=K[r];if(i){if(n="string"==typeof e?n:e,n.target==y)for(var a=["target","currentTarget","srcElement","type"];e=a.pop();)n=o(n,e,{get:"type"===e?function(){return r}:function(){return E}});W&&(("popstate"===r?E.onpopstate:E.onhashchange)||t).call(E,n);for(var a=0,c=i.length;a<c;a++)i[a].call(E,n);return v}return V(e,n)}function p(){var e=x.createEvent?x.createEvent("Event"):x.createEventObject();e.initEvent?e.initEvent("popstate",m,m):e.type="popstate",e.state=A.state,s(e)}function u(e,t,r,i){R?z=T.href:(0===F&&(F=2),t=n(t,2===F&&-1!==(""+t).indexOf("#")),t.c!==n().c&&(z=i,r?T.replace("#"+t.f):T.hash=t.f)),!$&&e&&(H[T.href]=e),Z=m}function l(e){var t=z;if(z=T.href,t){M!==T.href&&p();var e=e||E.event,t=n(t,v),r=n();e.oldURL||(e.oldURL=t.b,e.newURL=r.b),t.a!==r.a&&s(e)}}function h(e){setTimeout(function(){G("popstate",function(e){M=T.href,$||(e=o(e,"state",{get:function(){return A.state}})),s(e)},m)},0),!R&&e!==v&&"location"in A&&(g(P.hash),Z&&(Z=m,p()))}function d(e){var t,e=e||E.event;e:{for(t=e.target||e.srcElement;t;){if("A"===t.nodeName)break e;t=t.parentNode}t=void 0}var r="defaultPrevented"in e?e.defaultPrevented:e.returnValue===m;t&&"A"===t.nodeName&&!r&&(r=n(),t=n(t.getAttribute("href",2)),r.b.split("#").shift()===t.b.split("#").shift()&&t.a&&(r.a!==t.a&&(P.hash=t.a),g(t.a),e.preventDefault?e.preventDefault():e.returnValue=m))}function g(e){var t=x.getElementById(e=(e||"").replace(/^#/,""));t&&t.id===e&&"A"===t.nodeName&&(e=t.getBoundingClientRect(),E.scrollTo(_.scrollLeft||0,e.top+(_.scrollTop||0)-(_.clientTop||0)))}var v=!0,y=null,m=!1,E=("object"==typeof window?window:this)||{};if(!E.history||"emulate"in E.history)return E.history;var b,x=E.document,_=x.documentElement,O=E.Object,S=E.JSON,T=E.location,w=E.history,A=w,j=w.pushState,L=w.replaceState,R=function(){var e=E.navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")?!!j:m}(),$="state"in w,I=O.defineProperty,P=o({},"t")?{}:x.createElement("a"),N="",k=E.addEventListener?"addEventListener":(N="on")&&"attachEvent",B=E.removeEventListener?"removeEventListener":"detachEvent",D=E.dispatchEvent?"dispatchEvent":"fireEvent",G=r(E[k]),U=r(E[B]),V=r(E[D]),q={basepath:"/",redirect:0,type:"/",init:0},C="__historyAPI__",J=x.createElement("a"),z=T.href,M="",W=1,Z=m,F=0,H={},K={},Q=x.title,X={onhashchange:y,onpopstate:y},Y={setup:function(e,t,n){q.basepath=(""+(e==y?q.basepath:e)).replace(/(?:^|\/)[^\/]*$/,"/"),q.type=t==y?q.type:t,q.redirect=n==y?q.redirect:!!n},redirect:function(e,t){if(A.setup(t,e),t=q.basepath,E.top==E.self){var r=n(y,m,v).c,i=T.pathname+T.search;R?(i=i.replace(/([^\/])$/,"$1/"),r!=t&&RegExp("^"+t+"$","i").test(i)&&T.replace(r)):i!=t&&(i=i.replace(/([^\/])\?/,"$1/?"),RegExp("^"+t,"i").test(i)&&T.replace(t+"#"+i.replace(RegExp("^"+t,"i"),q.type)+T.hash))}},pushState:function(t,n,r){var i=x.title;Q!=y&&(x.title=Q),j&&e(j,arguments),u(t,r),x.title=i,Q=n},replaceState:function(t,n,r){var i=x.title;Q!=y&&(x.title=Q),delete H[T.href],L&&e(L,arguments),u(t,r,v),x.title=i,Q=n},location:{set:function(e){0===F&&(F=1),E.location=e},get:function(){return 0===F&&(F=1),P}},state:{get:function(){return"object"==typeof H[T.href]?S.parse(S.stringify(H[T.href])):void 0!==H[T.href]?H[T.href]:y}}},ee={assign:function(e){R||0!==(""+e).indexOf("#")?T.assign(e):u(y,e)},reload:function(e){T.reload(e)},replace:function(e){R||0!==(""+e).indexOf("#")?T.replace(e):u(y,e,v)},toString:function(){return this.href},origin:{get:function(){return void 0!==b?b:T.origin?T.origin:T.protocol+"//"+T.hostname+(T.port?":"+T.port:"")},set:function(e){b=e}},href:R?y:{get:function(){return n().b}},protocol:y,host:y,hostname:y,port:y,pathname:R?y:{get:function(){return n().d}},search:R?y:{get:function(){return n().e}},hash:R?y:{set:function(e){u(y,(""+e).replace(/^(#|)/,"#"),m,z)},get:function(){return n().a}}};return function(){var e=x.getElementsByTagName("script"),e=(e[e.length-1]||{}).src||"";(-1!==e.indexOf("?")?e.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,function(e,t,n){q[t]=(n||"").replace(/^(0|false)$/,"")}),G(N+"hashchange",l,m);var t=[ee,P,X,E,Y,A];$&&delete Y.state;for(var r=0;r<t.length;r+=2)for(var c in t[r])if(t[r].hasOwnProperty(c))if("object"!=typeof t[r][c])t[r+1][c]=t[r][c];else{if(e=a(t[r],c,t[r][c]),!o(t[r+1],c,e,function(e,n){n===A&&(E.history=A=t[r+1]=e)}))return U(N+"hashchange",l,m),m;t[r+1]===E&&(K[c]=K[c.substr(2)]=[])}return A.setup(),q.redirect&&A.redirect(),q.init&&(F=1),!$&&S&&i(),R||x[k](N+"click",d,m),"complete"===x.readyState?h(v):(!R&&n().c!==q.basepath&&(Z=v),G(N+"load",h,m)),v}()?(A.emulate=!R,E[k]=c,E[B]=f,E[D]=s,A):void 0});